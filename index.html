<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>30 Seconds</title>
<style>
:root { --bg:#0f172a; --fg:#e2e8f0; --accent:#22c55e; --muted:#94a3b8; }
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh;
  display:flex; align-items:center; justify-content:center;
  background:var(--bg); color:var(--fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
.container{width:min(900px,92vw); text-align:center;}
.card{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08);
  border-radius:20px; padding:2rem;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}
.hidden{display:none}
h1{margin:0 0 1rem; letter-spacing:.3px}
.btn{
  font-size:clamp(18px,2.2vw,26px); padding:1rem 2rem;
  border:0; border-radius:16px; background:var(--accent); color:#0a0a0a; cursor:pointer;
}
.btn:disabled{opacity:.6; cursor:not-allowed}
#timer{font-variant-numeric:tabular-nums; font-size:clamp(36px,6vw,64px); margin:0 0 1rem}
#words{list-style:none; padding:0; margin:1rem 0 0; display:grid; gap:.6rem}
#words li{
  font-size:clamp(22px,3vw,34px); padding:.4rem .8rem;
  background:rgba(255,255,255,.06); border-radius:12px;
}

/* Overlay als rechter Streifen, damit Begriffe frei bleiben */
.overlay{
  position:fixed; inset:0; display:none;
}
.overlay .modal{
  position:absolute; right:1rem; top:1rem; bottom:1rem;
  width:min(360px, 42vw);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  background:rgba(15,23,42,.92);
  border:1px solid rgba(255,255,255,.12);
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.5);
  padding:1.5rem;
  text-align:center;
}
.overlay h2{font-size:clamp(28px,4vw,48px); margin:0 0 1rem}
.footer{margin-top:1rem; color:var(--muted); font-size:14px}
</style>
</head>
<body>
  <div class="container">
    <div id="menu" class="card">
      <h1>30 Seconds</h1>
      <p class="footer">Tippe auf „Start“, du erhältst 5 Begriffe und 30&nbsp;Sekunden Zeit.</p>
      <button id="startBtn" class="btn">Start</button>
    </div>

    <div id="game" class="card hidden" role="region" aria-label="Spielbereich">
      <div id="timer" aria-live="assertive">30</div>
      <ul id="words"></ul>
    </div>
  </div>

  <div id="overlay" class="overlay" aria-modal="true" role="dialog">
    <div class="modal card">
      <h2>Zeit abgelaufen</h2>
      <button id="nextBtn" class="btn">Weiter</button>
      <p class="footer">Die Begriffe bleiben links vollständig sichtbar.</p>
    </div>
  </div>

<script>
// === Vollständige Begriffe (inkl. etwaiger Duplikate aus der CSV) ===
const WORDS = [
  // --- einfache / bekannte Begriffe ---
  "Pyramide",
  "Schraubenzieher",
  "Schneesturm",
  "Schach",
  "Kaffeemaschine",
  "Flugzeug",
  "Zebra",
  "Donner",
  "Fußball",
  "Oper",
  "Laser",
  "Dinosaurier",
  "Kompass",
  "Seilbahn",
  "Satellit",
  "Wolkenkratzer",
  "Gitarre",
  "Auto",
  "Berlin",
  "Hamburg",
  "Rom",
  "London",
  "Paris",
  "New York",
  "Tokio",
  "Sydney",
  "Stockholm",
  "München",
  "Schokolade",
  "Pizza",
  "Apfel",
  "Banane",
  "Kaffee",
  "Bier",
  "Wein",
  "Hund",
  "Katze",
  "Papagei",
  "Pinguin",
  "Elefant",
  "Tiger",
  "Krokodil",
  "Panda",
  "Eiffelturm",
  "Big Ben",
  "Freiheitsstatue",
  "Taj Mahal",
  "Mona Lisa",
  "Harry Potter",
  "Darth Vader",
  "Batman",
  "Superman",
  "Spiderman",
  "Iron Man",
  "Wonder Woman",
  "Homer Simpson",
  "Bart Simpson",
  "Mickey Maus",
  "Donald Duck",
  "Spongebob",
  "Star Wars",
  "Game of Thrones",
  "Herr der Ringe",
  "FIFA",
  "Minecraft",
  "Fortnite",
  "Pokémon",
  "Mario",
  "Zelda",
  "Tetris",
  "Pac-Man",
  "Netflix",
  "Spotify",
  "YouTube",
  "Instagram",
  "Facebook",
  "Twitter",
  "TikTok",
  "WhatsApp",
  "Google",
  "Apple",
  "Microsoft",
  "Samsung",
  "Tesla",
  "BMW",
  "Mercedes",
  "Audi",
  "Volkswagen",
  "Nike",
  "Adidas",
  "Puma",
  "Coca-Cola",
  "Pepsi",
  "McDonald's",
  "Burger King",
  "Ikea",
  "Amazon",
  "ChatGPT",
  "Christian Lindner",

  // --- schwierigere / speziellere Begriffe ---
  "Quantenmechanik",
  "Relativitätstheorie",
  "Neutronenstern",
  "Schwarzes Loch",
  "Kernfusion",
  "Photosynthese",
  "Fermentierung",
  "Nanotechnologie",
  "Blockchain",
  "Quantencomputer",
  "Algorithmus",
  "Neuronales Netzwerk",
  "Biosphäre",
  "Grundwasserspiegel",
  "Vulkanismus",
  "Archipel",
  "Permafrost",
  "Monsunregen",
  "Polarnacht",
  "Fjord",
  "Mittelalter",
  "Renaissance",
  "Barock",
  "Aufklärung",
  "Industrialisierung",
  "Französische Revolution",
  "Kalter Krieg",
  "Eiserner Vorhang",
  "Magna Carta",
  "Politbüro",
  "Menschenrechte",
  "UNO",
  "NATO",
  "Europäische Union",
  "Römisches Reich",
  "Griechische Antike",
  "Troja",
  "Odyssee",
  "Ilias",
  "Pandora",
  "Medusa",
  "Minotaurus",
  "Ragnarök",
  "Yggdrasil",
  "Philosophie",
  "Dialektik",
  "Skeptizismus",
  "Empirismus",
  "Rationalismus",
  "Existenzialismus",
  "Nihilismus",
  "Utopie",
  "Dystopie",
  "Empathie",
  "Rhetorik",
  "Hermeneutik",
  "Dekonstruktion",
  "Postmoderne",
  "Linguistik",
  "Morphologie",
  "Syntax",
  "Semantik",
  "Pragmatik",
  "Kognitionswissenschaft",
  "Impressionismus",
  "Expressionismus",
  "Kubismus",
  "Bauhaus",
  "Dadaismus",
  "Surrealismus",
  "Futurismus",
  "Minimalismus",
  "Kafka",
  "Goethe",
  "Faust",
  "Schiller",
  "Nietzsche",
  "Kant",
  "Platon",
  "Aristoteles",
  "Sokrates",
  "Hobbes",
  "Hegel",
  "Marxismus",
  "Kapitalismus",
  "Sozialismus",
  "Faschismus",
  "Anarchismus",
  "Ökologie",
  "Biodiversität",
  "Klimawandel",
  "Treibhausgase",
  "Ozonloch",
  "Nachhaltigkeit",
  "Erderwärmung",
  "CO2-Bilanz",
  "Solarenergie",
  "Windkraft",
  "Gezeitenkraftwerk",
  "Wasserkraft",
  "Geothermie",
  "Astrophysik",
  "Kosmologie",
  "Galaxie",
  "Exoplanet",
  "Urknall",
  "Stringtheorie",
  "Dunkle Materie",
  "Dunkle Energie",
  "Teilchenbeschleuniger",
  "Hadronenkollider",
  "Proton",
  "Neutron",
  "Elektron",
  "Quark",
  "Boson",
  "Higgs-Boson",
  "Radioaktivität",
  "Halbwertszeit",
  "Isotop",
  "Spektroskopie",
  "Chromosom",
  "DNA",
  "RNA",
  "Genetik",
  "Evolutionstheorie",
  "Darwin",
  "Mutation",
  "Selektion",
  "Epigenetik",
  "Ökosystem",
  "Symbiose",
  "Parasitismus",
  "Mykologie",
  "Mikrobiom",
  "Virologie",
  "Immunologie",
  "Pandemie",
  "Epidemiologie",
  "Neuroplastizität",
  "Künstliche Intelligenz",
  "Maschinelles Lernen",
  "Deep Learning",
  "Big Data",
  "Cloud Computing",
  "Cybersicherheit",
  "Quantenverschlüsselung",
  "Hacktivismus",
  "Metaverse",
  "Augmented Reality",
  "Virtuelle Realität",
  "Hologramm",
  "Nanoroboter",
  "Biotechnologie",
  "CRISPR",
  "Klonen",
  "Stammzellen",
  "Neurotransmitter",
  "Dopamin",
  "Serotonin",
  "Oxytocin",
  "Adrenalin",
  "Cortisol",
  "Placeboeffekt",
  "Nocebo",
  "Psychoanalyse",
  "Kognitive Dissonanz",
  "Behaviorismus",
  "Humanismus",
  "Transhumanismus",
  "Kybernetik"
];


// Einstellungen
const COUNT = 5;     // Anzahl Begriffe pro Runde
const DURATION = 30; // Sekunden pro Runde

// UI-Referenzen
const menu     = document.getElementById('menu');
const game     = document.getElementById('game');
const startBtn = document.getElementById('startBtn');
const wordsUl  = document.getElementById('words');
const timerEl  = document.getElementById('timer');
const overlay  = document.getElementById('overlay');
const nextBtn  = document.getElementById('nextBtn');

// Zustand
let remaining = DURATION;
let tick = null;

// Web Audio: einmalige Initialisierung bei Nutzerinteraktion
let audioCtx = null;
function initAudio() {
  if (!audioCtx) {
    const Ctx = window.AudioContext || window.webkitAudioContext;
    audioCtx = new Ctx();
  }
  if (audioCtx.state === 'suspended') audioCtx.resume();
}

function playBeep(f=880, dur=0.25) {
  if (!audioCtx) return;
  const t0 = audioCtx.currentTime;
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = 'sine';
  osc.frequency.setValueAtTime(f, t0);
  // kurze Hüllkurve gegen Klicken
  gain.gain.setValueAtTime(0.0001, t0);
  gain.gain.linearRampToValueAtTime(0.25, t0 + 0.02);
  gain.gain.exponentialRampToValueAtTime(0.0001, t0 + dur);
  osc.connect(gain).connect(audioCtx.destination);
  osc.start(t0);
  osc.stop(t0 + dur + 0.05);
}

// ---- NICHT-WIEDERHOLUNG: Pool aus eindeutigen Wörtern ----
let wordPool = [];
function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function refillPool() {
  // eindeutige Wörter beibehaltene Reihenfolge -> dann mischen
  const unique = Array.from(new Set(WORDS));
  wordPool = shuffle(unique.slice());
}
function getNextWords(n) {
  if (wordPool.length < n) refillPool();
  return wordPool.splice(0, n);
}

function renderWords(list){
  wordsUl.innerHTML = '';
  list.forEach(w => {
    const li = document.createElement('li');
    li.textContent = w;
    wordsUl.appendChild(li);
  });
}

function show(el){ el.classList.remove('hidden'); }
function hide(el){ el.classList.add('hidden'); }

function startRound(){
  initAudio(); // Audio-Autorisierung durch Nutzerinteraktion
  try{
    renderWords(getNextWords(COUNT));
  }catch(e){
    alert(e.message);
    return;
  }
  remaining = DURATION;
  timerEl.textContent = String(remaining);
  hide(menu);
  show(game);

  clearInterval(tick);
  tick = setInterval(() => {
    remaining -= 1;
    timerEl.textContent = String(remaining);
    if(remaining <= 0){
      clearInterval(tick);
      timerEl.textContent = '0';
      overlay.style.display = 'block'; // rechter Streifen sichtbar
      playBeep(); // Hinweiston
    }
  }, 1000);
}

function resetToMenu(){
  overlay.style.display = 'none';
  hide(game);
  remaining = DURATION;
  timerEl.textContent = String(DURATION);
  show(menu);
}

startBtn.addEventListener('click', startRound);
nextBtn.addEventListener('click', resetToMenu);

// Escape schließt das Overlay (optional für Tastatur)
document.addEventListener('keydown', (e) => {
  if(e.key === 'Escape' && overlay.style.display === 'block') resetToMenu();
});
</script>
</body>
</html>
